<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <title>Adding Metafields to Product Variants - Alan Ryan</title>
    
    <meta name="description" content="B y By using metaafields we can store extra information on products, collections, customers, orders, blogs, pages and your shop. Then, you can use the metafields object to display the information on you website pages using simple Liquid code.
The easiest way to add metafields is by using an app, such as Metafields Guru. It is possible to add metafields without an app using the bulk editor, here&rsquo;s how.
A metafield consists of a namespace, a key, a value, and an optional description.">
    <meta name="author" content="">
    
    
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet">
    
    <link href="https://sleepy-cori-fc6bbb.netlify.app/mono-blue.css" rel="stylesheet">
    <link href="https://sleepy-cori-fc6bbb.netlify.app/style.css" rel="stylesheet">
    <link href="https://sleepy-cori-fc6bbb.netlify.app/custom.css" rel="stylesheet">
    
    <script src="https://sleepy-cori-fc6bbb.netlify.app/DrawSVGPlugin.min.js"></script>
    <script src="https://sleepy-cori-fc6bbb.netlify.app/SplitText.js"></script>
    <script src="https://sleepy-cori-fc6bbb.netlify.app/GSDevTools.min.js"></script>
<script src="https://sleepy-cori-fc6bbb.netlify.app/gsap.min.js"></script>

<script src="https://sleepy-cori-fc6bbb.netlify.app/custom.js"></script>
    
    <link rel="apple-touch-icon" href="https://sleepy-cori-fc6bbb.netlify.app/apple-touch-icon.png">
    <link rel="icon" href="https://sleepy-cori-fc6bbb.netlify.app/favicon.ico">
    <meta name="generator" content="Hugo 0.80.0" />
    
    
    
  </head>
  <body>
   <header class="header">
      <nav class="nav">
 <div class="logo-wrapper">
  <div class="my-logo">
    <h1 class="name"><a href="https://sleepy-cori-fc6bbb.netlify.app">Alan Ryan</a></h1>
  </div>	
</div>

<style>
.logo-wrapper{
  visibility: hidden;
}
.my-logo,
.tagline {
  overflow:hidden;
  margin-left: auto;
  padding: 3px;
 }
.name
 {
  margin-left: var(--gap);
  text-align: left;
  line-height: 1.2;
  font-size: calc(1.5rem + 3vw);;
  color: #F5DF4D;
  width: 18.75rem;
}
.tag
 {
  margin: 0;
  text-align: left;
  width: 584px;
  font-size: 1.75;
  color: white;
  letter-spacing: 1px; 
}
</style>
<script>

gsap.registerPlugin(SplitText, GSDevTools);

function init(){
 gsap.set(".logo-wrapper", {autoAlpha:1})
	
 let taglineSplit = new SplitText( ".tag", {type:"chars, words"})
 
 let animation = gsap.timeline()
 .from(".my-logo", {width:0, ease:"power1.in", duration:0.3})
 .from(taglineSplit.chars, {yPercent:-140, stagger:0.05})


}
 
window.addEventListener("load", init);
</script>


        <ul class="menu">
          <li>
            <a href="/projects/">Projects</a>
          </li>
          <li>
            <a href="/blog/">Latest Posts</a>
          </li>
          <li>
            <a href="/contact/">Contact</a>
          </li>
        </ul>
      </nav>
    </header>
    <main class="main">


<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">Adding Metafields to Product Variants</h1>
    <div class="post-meta">January 2, 2021</div>
  </header>
  <div class="post-content"><p><span aria-hidden="true"><span class="drop-cap">
B</span>
y</span>
 <span class="sr-only">By</span>
 using metaafields we can store extra information on products, collections, customers, orders, blogs, pages and your shop. Then, you can use the metafields object to display the information on you website pages using simple Liquid code.</p>
<p>The easiest way to add metafields is by using an app, such as Metafields Guru. It is possible to add metafields without an app using the bulk editor, <a href="">here&rsquo;s how</a>.</p>
<p>A metafield consists of a namespace, a key, a value, and an optional description. The namespace is used to logically group different metafields.</p>
<p>You can also add metafields to the product variants, but it is more complcated to access the variant metafield information on your page. Variant metafields can display some different information depending on the selected variant. To achieve this it&rsquo;s necessary to update the information depending on a change to the selected variant. The involves updating the javascript connected to the selctor.</p>
<p>Here is an explanation on how to achive this with the Debut theme, it may differ slightly depending the themes you are using.</p>
<p>For example, here&rsquo;s how to display different shipping inforamtion depending on a selected product variant:</p>
<ul>
<li>Add some html like this to the product-template.liquid file (position it where you would like to display the shipping information):</li>
</ul>
<pre><code>&lt;p class=&quot;variant_shipping_info&quot; style=&quot;display: none;&quot;&gt;&lt;/p&gt;
</code></pre><ul>
<li>Below this add some liquid code:</li>
</ul>
<pre><code class="language-liquid" data-lang="liquid">{% capture 'meta_data' %}
{% for variant in product.variants %}
{{variant.id}}:{{ variant.metafields.shipping.time | json }}{% unless forloop.last %},{% endunless %}
  {% endfor %}
{% endcapture %}
</code></pre><ul>
<li>Then, add this javascript inside <!-- raw HTML omitted --> <!-- raw HTML omitted --> tags:</li>
</ul>
<pre><code>  const currentVariantId = {{ product.selected_or_first_available_variant.id }}; 
  const metaData = { {{ meta_data }} };
  const shippingInfo = (id) =&gt; {
  var selector = document.querySelector('.variant_shipping_info');
    if (metaData[id]) {
     selector.style.display = 'block'
     selector.innerHTML = metaData[id];
    } 
  }
  shippingInfo(currentVariantId);  
</code></pre><p>Make sure to change the naming to match your metafields. Mine are variant.metafields.shipping.time</p>
<p>Next you need to update the theme.js file. Find the code for the <strong>Event handler for when a variant input changes</strong>, and add these few lines near the end.</p>
<pre><code> if (variant) {
	  var id = variant.id 
	  shippingInfo(id);
      }
</code></pre><p>Like this:</p>
<pre><code> _onSelectChange: function() {
      var variant = this._getVariantFromOptions();
 
      this.$container.trigger({
        type: 'variantChange',
        variant: variant
      });
 
      if (!variant) {
        return;
      }
 
      this._updateMasterSelect(variant);
      this._updateImages(variant);
      this._updatePrice(variant);
      this._updateSKU(variant);
      this.currentVariant = variant;
 
      if (this.enableHistoryState) {
        this._updateHistoryState(variant);
      }
      
      
      if (variant) {
	  var id = variant.id 
	  shippingInfo(id);
      }
      
    }, 
</code></pre><p>Now your variant metafield should update as you select different options.</p>
</div>
  
</article></main>
<footer class="footer" role="contentinfo" aria-labelledby="label-footer">
  <h2 id="label-footer" class="sr-only">Page footer</h2>
  <span>&copy; 2021 <a href="https://sleepy-cori-fc6bbb.netlify.app">Alan Ryan</a></span>
  <span>&middot;</span>
  <span>Powered by <a href="https://gohugo.io/" rel="noopener" target="_blank">Hugo️️</a>️</span>
</footer>
<script src="https://sleepy-cori-fc6bbb.netlify.app/highlight.min.js"></script>


<script>
  hljs.initHighlightingOnLoad();
</script>
</body>
</html>

